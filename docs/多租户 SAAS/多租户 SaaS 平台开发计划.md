# rose 多租户 SaaS 平台开发计划

## 一、模块划分建议

- rose-iam-api：身份与访问管理相关的接口、DTO、VO、常量等
- rose-iam-service：用户、租户、认证、角色、权限、组织、菜单等所有核心业务实现
- rose-log-api / rose-log-service：操作日志、审计日志等
- rose-notify-api / rose-notify-service：消息通知相关
- rose-job-api / rose-job-service：定时任务相关
- rose-config-api / rose-config-service：配置、字典等（可后置）
- rose-common：通用工具类、基础设施（可选）

\> 初期可只实现 rose-iam、rose-log，其他模块后续逐步补充。

------

## 二、开发优先级与阶段

### 第一阶段：平台基础能力（MVP）

1. rose-iam（核心）

- 用户注册、登录、登出

- 用户信息管理（资料修改、密码重置）

- 租户的创建、修改、删除、查询

- 用户与租户的绑定与切换

- Token 认证（JWT）

- 角色、权限管理（RBAC）

- 菜单/资源权限

- 部门、岗位管理

- 基础数据隔离（租户ID字段隔离）

- 基础前端管理后台（登录页、主框架、用户/租户/角色/菜单/部门管理页面）

2. rose-log（基础）

- 操作日志、登录日志

- 审计追踪

------

### 第二阶段：平台增强能力

1. rose-iam（增强）

- 细粒度数据权限（部门、岗位、本人等）

- 租户套餐/计费管理

- 第三方社交登录（OAuth2）

- 单点登录（SSO）

- 密码策略、安全设置

- 防止重复提交、接口幂等

2. rose-log（增强）

- 日志查询、导出

- 审计日志细化

3. rose-notify

- 系统消息推送（站内信、邮件、短信等）

- 通知模板管理

------

### 第三阶段：运维与扩展

1. rose-job

- 定时任务管理

- 任务执行日志

2. rose-config

- 配置、字典管理

- 动态配置（可后置）

3. 平台运维与安全

- 服务健康检查、性能监控（Actuator、Prometheus）

- API 文档自动生成（SpringDoc）

- 限流、接口权限校验

- 多语言与国际化

- 数据、配置备份与恢复

- 持续集成/交付、自动化测试、代码质量

------

## 三、开发计划表（示例）

| 阶段 | 功能模块         | 说明/目标                                                  |
| :--- | :--------------- | :--------------------------------------------------------- |
| 1    | rose-iam         | 用户、租户、认证、权限、组织、菜单、基础隔离、前端管理后台 |
| 1    | rose-log         | 操作日志、登录日志、审计追踪                               |
| 2    | rose-iam（增强） | 数据权限、套餐、社交登录、SSO、安全策略、幂等              |
| 2    | rose-log（增强） | 日志查询、导出、审计细化                                   |
| 2    | rose-notify      | 消息通知、模板管理                                         |
| 3    | rose-job         | 定时任务、任务日志                                         |
| 3    | rose-config      | 配置、字典、动态配置                                       |
| 3    | 运维与安全       | 监控、API文档、限流、国际化、备份、CI/CD                   |

------

## 四、补充建议

- 优先保证租户、用户、权限、组织、菜单五大基础能力，先做通、再做细。

- 前端可用开源 Vue3 管理后台模板（如 element-plus-admin、vue-element-admin）快速搭建。

- 多租户隔离建议用租户ID字段+MyBatis拦截器实现，后续易扩展。

- 领域模型设计时，优先考虑聚合根和边界，避免过度拆分。

- 每个阶段完成后，及时补充单元测试和文档。